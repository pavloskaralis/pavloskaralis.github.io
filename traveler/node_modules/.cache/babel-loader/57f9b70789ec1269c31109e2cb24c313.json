{"ast":null,"code":"import axios from 'axios';\nimport setUserID from './setUserID.js';\nimport setItineraries from './setItineraries.js';\nimport toggleLogin from './toggleLogin.js';\nexport default function userSetup() {\n  return dispatch => {\n    const getRequest = async () => {\n      const result = await axios.get('http://localhost:3001/auto_login', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const {\n        data\n      } = result;\n\n      if (!data.error) {\n        //setUserID must dispatch first for Show Page useEffect to work properly\n        dispatch(setUserID(data.id));\n        dispatch(toggleLogin(true));\n        dispatch(setItineraries(data.itineraries));\n      } else {\n        dispatch(toggleLogin(false));\n      }\n    };\n\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      getRequest();\n    } else {\n      dispatch(toggleLogin(false));\n    }\n  };\n}","map":{"version":3,"sources":["/Users/pavloskaralis/Desktop/traveler_frontend/src/actions/userSetup.js"],"names":["axios","setUserID","setItineraries","toggleLogin","userSetup","dispatch","getRequest","result","get","headers","Authorization","token","data","error","id","itineraries","localStorage","getItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,OAAOC,cAAP,MAA2B,qBAA3B;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AAGA,eAAe,SAASC,SAAT,GAAqB;AAChC,SAAOC,QAAQ,IAAI;AACf,UAAMC,UAAU,GAAG,YAAW;AAC1B,YAAMC,MAAM,GAAG,MAAMP,KAAK,CAACQ,GAAN,CAAU,kCAAV,EAA8C;AAC/DC,QAAAA,OAAO,EAAE;AACLC,UAAAA,aAAa,EAAG,UAASC,KAAM;AAD1B;AADsD,OAA9C,CAArB;AAKA,YAAM;AAACC,QAAAA;AAAD,UAASL,MAAf;;AACA,UAAG,CAACK,IAAI,CAACC,KAAT,EAAe;AACX;AACAR,QAAAA,QAAQ,CAACJ,SAAS,CAACW,IAAI,CAACE,EAAN,CAAV,CAAR;AACAT,QAAAA,QAAQ,CAACF,WAAW,CAAC,IAAD,CAAZ,CAAR;AACAE,QAAAA,QAAQ,CAACH,cAAc,CAACU,IAAI,CAACG,WAAN,CAAf,CAAR;AACH,OALD,MAKO;AACHV,QAAAA,QAAQ,CAACF,WAAW,CAAC,KAAD,CAAZ,CAAR;AACH;AACJ,KAfD;;AAiBA,UAAMQ,KAAK,GAAGK,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AACA,QAAGN,KAAH,EAAU;AACNL,MAAAA,UAAU;AACb,KAFD,MAEO;AACHD,MAAAA,QAAQ,CAACF,WAAW,CAAC,KAAD,CAAZ,CAAR;AACH;AACJ,GAxBD;AAyBH","sourcesContent":["import axios from 'axios'\nimport setUserID from './setUserID.js'\nimport setItineraries from './setItineraries.js'\nimport toggleLogin from './toggleLogin.js'\n\n\nexport default function userSetup() {\n    return dispatch => {\n        const getRequest = async() => {\n            const result = await axios.get('http://localhost:3001/auto_login', {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            }) \n            const {data} = result;  \n            if(!data.error){\n                //setUserID must dispatch first for Show Page useEffect to work properly\n                dispatch(setUserID(data.id));\n                dispatch(toggleLogin(true));\n                dispatch(setItineraries(data.itineraries))\n            } else {\n                dispatch(toggleLogin(false));\n            }  \n        }\n        \n        const token = localStorage.getItem(\"token\");\n        if(token) {\n            getRequest();\n        } else {\n            dispatch(toggleLogin(false));\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}